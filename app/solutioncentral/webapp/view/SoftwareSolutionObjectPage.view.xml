<mvc:View
	xmlns:html="http://www.w3.org/1999/xhtml"
	controllerName="com.gavdilabs.techtransmgt.solutioncentral.controller.softwareSolutionObjectPage"
	xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:m="sap.m" xmlns="sap.uxap"
	xmlns:webc="@ui5/webcomponents/dist"
	core:require="{
		formatter: 'com/gavdilabs/techtransmgt/solutioncentral/model/formatter'
	}">
	<ObjectPageLayout id="softwareSolutionObjectPage" useIconTabBar="false"
		showFooter="{= !${IsActiveEntity}}"
		showTitleInHeaderContent="true"
		headerContentPinnable="{= ${IsActiveEntity} ? true : false}"
		showHeaderContent="{= ${IsActiveEntity} ? true : false}"
		upperCaseAnchorBar="false">
		<headerTitle>
			<ObjectPageDynamicHeaderTitle>
				<breadcrumbs>
					<m:Breadcrumbs id="breadcrumbsContainer"
						currentLocationText="{= ${name} ? ${name} : ${i18n>title.newSolution}}">
					</m:Breadcrumbs>
				</breadcrumbs>
				<expandedHeading>
					<m:Title text="{= ${name} ? ${name} :${i18n>title.newSolution}}" wrapping="true" />
				</expandedHeading>

				<snappedHeading>
					<m:Title text="{= ${name} ? ${name} : ${i18n>title.newSolution}}" wrapping="true" />
				</snappedHeading>

				<expandedContent>
					<m:Text text="{description}" />
				</expandedContent>

				<snappedContent>
					<m:Text text="{description}" />
				</snappedContent>

				<actions>
					<m:Button text="{i18n>button.approve}" icon="sap-icon://accept" press=".onApproveSolution"
						type="Accept"
						visible="{= ${IsActiveEntity} &amp;&amp; ${path: 'solutionStatus_code', targetType: 'any'} === 0 }" />
					<m:Button text="{i18n>button.reject}" icon="sap-icon://decline" press=".onRejectSolution"
						type="Reject"
						visible="{= ${IsActiveEntity} &amp;&amp; ${path: 'solutionStatus_code', targetType: 'any'} === 0 }" />
					<m:Button text="{i18n>button.reviewLatest}" icon="sap-icon://favorite" type="Ghost"
						press=".onReviewSolutionPress"
						enabled="{= ${path: 'activeVersion/ID', targetType: 'any' } !== null}"
						visible="{= ${IsActiveEntity} &amp;&amp; !${HasDraftEntity}}" />
					<m:Button
						text="{= ${path: 'IsActiveEntity', targetType: 'any'} === true ? ${i18n>button.savedVersion} : ${i18n>button.draft}}"
						press=".onDraftSwitcherPress" type="Ghost" icon="sap-icon://navigation-down-arrow"
						iconFirst="false"
						visible="{= ${IsActiveEntity} &amp;&amp; ${HasDraftEntity} || !${IsActiveEntity}}" />
					<m:Button text="{i18n>button.edit}" type="Emphasized" press=".onEditSolution"
						visible="{= ${IsActiveEntity} &amp;&amp; !${HasDraftEntity}}" />
					<m:Button text="{i18n>button.delete}" type="Transparent" press=".onDeleteSolutionPress"
						visible="{= ${IsActiveEntity} &amp;&amp; !${HasDraftEntity}}" />
				</actions>

				<content>
					<m:HBox items="{path: 'solutionTags', templateShareable: true}" class="sapUiSmallMarginBegin" alignItems="Center" visible="{= ${IsActiveEntity} ? true : false}" >
						<m:GenericTag text="{tag/name}" class="sapUiTinyMarginEnd" status="" StatusIconHidden="true"/>
					</m:HBox>
				</content>
			</ObjectPageDynamicHeaderTitle>
		</headerTitle>
		<headerContent>
			<m:FlexBox wrap="Wrap" justifyContent="SpaceBetween" fitContainer="true">
				<m:HBox>
					<m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
						<m:Title text="{i18n>label.status}" class="sapUiSmallMarginBottom" />
						<m:ObjectStatus text="{= ${solutionStatus_code} ? ${solutionStatus/descr} : '–'}"
							state="{
								path: 'solutionStatus/criticalityLevel',
								formatter: 'formatter.formatSoftwareStatus'
							}"
							icon="{
								path: 'solutionStatus/criticalityLevel',
								formatter: 'formatter.formatSoftwareStatusIcon'
							}"
							class="sapMObjectStatusLarge" />
					</m:VBox>

					<m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
						<m:Title text="{i18n>label.platform}" class="sapUiSmallMarginBottom" />
						<m:ObjectStatus text="{= ${platform_code} ? ${platform/name} : '–'}" state="None"
							class="sapMObjectStatusLarge" />
					</m:VBox>

					<m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
						<m:Title text="{i18n>label.businessCriticality}" class="sapUiSmallMarginBottom" />
						<m:ObjectStatus
							text="{= ${businessCriticality_code} ? ${businessCriticality/name} : '–'}"
							icon="{
								path: 'businessCriticality/code',
								formatter: 'formatter.formatBusinessCriticalityLevelIcon'
							}"
							state="{
								path: 'businessCriticality/code',
								formatter: 'formatter.formatBusinessCriticalityLevelState'
							}"
							class="sapMObjectStatusLarge" />
					</m:VBox>
				</m:HBox>

				<m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
					<m:Title class="sapUiSmallMarginBottom" />
					<m:GenericTag text="{i18n>label.hybrid}"
						visible="{= ${path: 'hybridToLinks', targetType: 'any'}.length > 0}"
						design="StatusIconHidden"
						status="Warning"
						press=".onHybridTagPress"
						class="sapUiSmallMarginBegin customTagZoom" />
				</m:VBox>
			</m:FlexBox>
		</headerContent>

		<sections>
			<ObjectPageSection visible="{= !${IsActiveEntity}}" title="{i18n>title.header}">
				<subSections>
					<ObjectPageSubSection title="{i18n>title.header}" showTitle="false">
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.HeaderInfo"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.technicalInfo}">
				<subSections>
					<ObjectPageSubSection title="{i18n>title.technicalInfo}">
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.TechnicalInformation"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.owner}">
				<subSections>
					<ObjectPageSubSection title="{i18n>title.owner}">
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.OwnerInformation"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.businessCases}">
				<subSections>
					<ObjectPageSubSection title="{i18n>title.businessCases}">
						<actions>
							<m:Button text="{i18n>button.create}" press=".onCreateNewBusinessCase"
								type="Transparent"
								visible="{= !${IsActiveEntity}}" />
						</actions>
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.BusinessCasesInformation"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>


			<ObjectPageSection title="{i18n>title.versions}">
				<subSections>
					<ObjectPageSubSection showTitle="true"
						title="{i18n>table.versionsTable} ({ path: 'versions', targetType: 'any', formatter: 'formatter.formatTableCount' })">
						<actions>
							<m:SearchField width="15rem"
								search=".onSearchFieldChange($event, 'versionsTable', 'solution_ID')" />
							<m:Button text="{i18n>button.create}" press=".onCreateNewVersionPress"
								type="Transparent"
								visible="{= !${IsActiveEntity}}" />
							<m:Button text="{i18n>button.delete}"
								press=".onDeleteTableEntry($event, 'versionsTable')" type="Transparent"
								visible="{= !${IsActiveEntity}}"
								enabled="{= ${versionsTableConfig>/selectedItems}.length > 0}" />
							<m:ToolbarSeparator />
							<m:Button tooltip="{i18n>default.settings}" icon="sap-icon://action-settings"
								press=".onPressTableSettings($event, 'versionsPersonalization')" />
						</actions>
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.VersionsTable"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.activeTechnologies}">
				<subSections>
					<ObjectPageSubSection showTitle="true"
						title="{i18n>table.activeTechnologies} ({ parts: [{path: 'activeVersion', targetType: 'any'}, {value: 'activeTechnologiesTable'}], formatter: 'formatter.formatTableCount' })">
						<actions>
							<m:SearchField width="15rem"
								search=".onSearchFieldChange($event, 'activeTechnologiesTable', 'softwareVersion_solution_ID')" />
							<m:ToolbarSeparator />
							<m:Button tooltip="{i18n>default.settings}" icon="sap-icon://action-settings"
								press=".onPressTableSettings($event, 'activeTechnologiesPerso')" />
						</actions>
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.ActiveTechnologiesTable"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.dependentSolutions}">
				<subSections>
					<ObjectPageSubSection showTitle="true"
						title="{i18n>table.dependentSolutions} ({path: 'Dependents', targetType: 'any', formatter: 'formatter.formatTableCount' })">
						<actions>
							<m:SearchField width="15rem"
								search=".onSearchFieldChange($event, 'dependentSolutionsTable', 'up__ID')" />
							<m:Button text="{i18n>button.create}" press=".onCreateNewDependentSolutionPress"
								type="Transparent"
								visible="{= !${IsActiveEntity}}" />
							<m:Button text="{i18n>button.delete}"
								press=".onDeleteTableEntry($event, 'dependentSolutionsTable')" type="Transparent"
								visible="{= !${IsActiveEntity}}"
								enabled="{= ${dependentSolutionsTableConfig>/selectedItems}.length > 0}" />
							<m:ToolbarSeparator />
							<m:Button tooltip="{i18n>default.settings}" icon="sap-icon://action-settings"
								press=".onPressTableSettings($event, 'dependentSolutionsPerso')" />
						</actions>
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.DependentSolutionsTable"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection title="{i18n>title.latestReleaseReview}">
				<subSections>
					<ObjectPageSubSection title="{i18n>title.latestReleaseReview}">
						<core:Fragment
							fragmentName="com.gavdilabs.techtransmgt.solutioncentral.view.fragments.LatestReviewInfo"
							type="XML" />
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
		<footer>
			<m:OverflowToolbar>
				<m:Button id="objectPageMessagingBtn" press=".openMessageView"
					text="{= ${message>/}.length}"
					icon="{= ${message>/}.length > 0 ? 'sap-icon://error' : 'sap-icon://sys-enter-2'}"
					type="{= ${message>/}.length > 0 ? 'Negative' : 'Ghost'}"
					enabled="{= ${message>/}.length > 0}" />
				<m:ToolbarSpacer />
				<m:DraftIndicator id="draftIndicator" visible="{= !${IsActiveEntity}}" />
				<m:Button text="{i18n>button.save}" type="Emphasized" press=".onSaveDraft"
					visible="{= ${HasActiveEntity} &amp;&amp; !${IsActiveEntity}}" />
				<m:Button text="{i18n>button.create}" type="Emphasized" press=".onSaveDraft"
					visible="{= !${HasActiveEntity} &amp;&amp; !${IsActiveEntity}}" />
				<m:Button text="{i18n>button.discardDraft}" visible="{= !${IsActiveEntity}}"
					type="Transparent" press=".onDiscardDraftPress" />
				<!-- <m:Button text="{i18n>button.approve}" press=".onApproveSolution" -->
				<!-- 	type="Accept" -->
				<!-- 	visible="{= ${IsActiveEntity} &amp;&amp; ${path: 'solutionStatus_code', targetType:
				'any'} === 0 }" /> -->
				<!-- <m:Button text="{i18n>button.reject}" press=".onRejectSolution" type="Reject" -->
				<!-- 	visible="{= ${IsActiveEntity} &amp;&amp; ${path: 'solutionStatus_code', targetType:
				'any'} === 0 }" /> -->
			</m:OverflowToolbar>
		</footer>
	</ObjectPageLayout>
</mvc:View>
